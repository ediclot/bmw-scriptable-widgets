<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‰‹æœºå®‰è£…ã€Œbmwå°ç»„ä»¶ã€æŒ‡å¯¼</title>
</head>
<body>
  <h1><a href="https://x.im3x.cn" style="text-decoration: none;color:#666;">ã€Œbmwå°ç»„ä»¶ã€</a>å®‰è£…æŒ‡å¯¼</h1>
  <button id="copy" onclick="copy()">ğŸ‘‡ 1.ç‚¹å‡»å¤åˆ¶ä¸‹æ–¹ä»£ç </button>
  <textarea id="js" rows="20" readonly style="min-width: 400px;">const FILE_MGR = FileManager[module.filename.includes('Documents/iCloud~') ? 'iCloud': 'local']();
let files = FILE_MGR.listContents(FILE_MGR.documentsDirectory());
await Promise.all(['bmw-linker.js'].map(async(js) = >{
	const REQ = new Request(`https: //raw.fastgit.org/ediclot/bmwwwwidgets/main/Publish/${encodeURIComponent(js)}`);        const RES = await REQ.load();        try {            FILE_MGR.remove(FILE_MGR.joinPath(FILE_MGR.documentsDirectory(), js));        } catch (e) {}        FILE_MGR.write(FILE_MGR.joinPath(FILE_MGR.documentsDirectory(), js), RES);    }));FILE_MGR.remove(module.filename);Safari.open('scriptable:///run?scriptName=' + encodeURIComponent('bmw-linker.js'));</textarea>
  <p>æ‰“å¼€ Scriptableï¼Œç‚¹å‡» â•ï¼Œç²˜è´´ï¼Œè¿è¡Œ â–¶ï¸</p>
  <a id="open" href="scriptable:///add?scriptName=hello">ğŸ‘‰ 2. ç‚¹å‡»æ‰“å¼€ Scriptable</a>
</body>
<style>
body {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
#copy, #open {
  width: 200px;
  height: 50px;
  background-color: green;
  color: #FFF;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  font-size: 14px;
}
#open {
  background-color: darkred;
}
#js {
  width: 200px;
  height: 100px;
  margin: 20px;
  z-index: -1;
}
</style>
<script>
var copyOK = 0;
function copy () {
document.getElementById("js").select();
document.execCommand("Copy");
document.getElementById("copy").innerText = "å¤åˆ¶æˆåŠŸï¼" + (copyOK > 0 ? '+'+copyOK :'')
copyOK ++;
document.getElementById("open").focus()
}

</script>
</html>
