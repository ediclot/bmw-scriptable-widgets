<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>手机安装「bmw小组件」指导</title>
</head>
<body>
  <h1><a href="https://x.im3x.cn" style="text-decoration: none;color:#666;">「bmw小组件」</a>安装指导</h1>
  <button id="copy" onclick="copy()">👇 1.点击复制下方代码</button>
  <textarea id="js" rows="20" readonly style="min-width: 400px;">const FILE_MGR = FileManager[module.filename.includes('Documents/iCloud~') ? 'iCloud': 'local']();
let files = FILE_MGR.listContents(FILE_MGR.documentsDirectory());
await Promise.all(['bmw-linker.js'].map(async(js) = >{
	const REQ = new Request(`https: //raw.fastgit.org/ediclot/bmwwwwidgets/main/Publish/${encodeURIComponent(js)}`);        const RES = await REQ.load();        try {            FILE_MGR.remove(FILE_MGR.joinPath(FILE_MGR.documentsDirectory(), js));        } catch (e) {}        FILE_MGR.write(FILE_MGR.joinPath(FILE_MGR.documentsDirectory(), js), RES);    }));FILE_MGR.remove(module.filename);Safari.open('scriptable:///run?scriptName=' + encodeURIComponent('bmw-linker.js'));</textarea>
  <p>打开 Scriptable，点击 ➕，粘贴，运行 ▶️</p>
  <a id="open" href="scriptable:///add?scriptName=hello">👉 2. 点击打开 Scriptable</a>
</body>
<style>
body {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
#copy, #open {
  width: 200px;
  height: 50px;
  background-color: green;
  color: #FFF;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  font-size: 14px;
}
#open {
  background-color: darkred;
}
#js {
  width: 200px;
  height: 100px;
  margin: 20px;
  z-index: -1;
}
</style>
<script>
var copyOK = 0;
function copy () {
document.getElementById("js").select();
document.execCommand("Copy");
document.getElementById("copy").innerText = "复制成功！" + (copyOK > 0 ? '+'+copyOK :'')
copyOK ++;
document.getElementById("open").focus()
}

</script>
</html>
